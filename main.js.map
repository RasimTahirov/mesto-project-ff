{"version":3,"file":"main.js","mappings":"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","sources":["webpack://yandex.praktikum/./src/components/utils.js","webpack://yandex.praktikum/./src/components/api.js","webpack://yandex.praktikum/./src/components/card.js","webpack://yandex.praktikum/./src/components/modal.js","webpack://yandex.praktikum/./src/components/validation.js","webpack://yandex.praktikum/./src/index.js"],"sourcesContent":["export function checkResponse(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка ${res.status}`);\r\n}\r\n","const config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-8\",\r\n  headers: {\r\n    authorization: \"f0900dc3-fecd-4246-b516-514bd8cfc01c\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\nimport { checkResponse } from \"./utils\";\r\n\r\n// Функция загрузки информации о пользователе\r\nexport const getUserInfo = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers,\r\n  }).then(checkResponse);\r\n};\r\n\r\n// Функция загрузки карточек\r\nexport const getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers,\r\n  }).then(checkResponse);\r\n};\r\n\r\n// Функция обновления данных профиля пользователя\r\nexport const updateUserProfile = (name, about) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about,\r\n    }),\r\n  }).then(checkResponse);\r\n};\r\n\r\n// Функция добавления новой карточки\r\nexport const addCard = (newCard) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify(newCard),\r\n  }).then(checkResponse);\r\n};\r\n\r\n// Функция удаления карточки\r\nexport const deleteCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then(checkResponse);\r\n};\r\n\r\n// Функция изменения статуса лайка на карточке\r\nexport const toggleLike = (cardId, isLiked) => {\r\n  const method = isLiked ? \"DELETE\" : \"PUT\";\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: method,\r\n    headers: config.headers,\r\n  }).then(checkResponse);\r\n};\r\n\r\n// Функция обновления аватара пользователя\r\nexport const changeAvatar = (avatarUrl) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ avatar: avatarUrl }),\r\n  }).then(checkResponse);\r\n};\r\n","// import { cardTemplate } from \"../index.js\";\r\nexport { createCard };\r\nimport { deleteCard as apiDeleteCard, toggleLike as apiToggleLike } from \"./api.js\";\r\n\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\n// Функция создания карточки\r\nfunction createCard(card, openImageHandler, userId, deleteCallback) {\r\n  const cardElement = cardTemplate.querySelector(\".card\").cloneNode(true);\r\n  const cardImages = cardElement.querySelector(\".card__image\");\r\n  const cardTitle = cardElement.querySelector(\".card__title\");\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  const likeBtn = cardElement.querySelector(\".card__like-button\");\r\n  const likeCounter = cardElement.querySelector(\".card__like-counter\");\r\n\r\n  cardImages.alt = card.name;\r\n  cardImages.src = card.link;\r\n  cardTitle.textContent = card.name;\r\n\r\n  cardImages.addEventListener(\"click\", () => {\r\n    openImageHandler(card.link, card.name, card.name);\r\n  });\r\n\r\n  deleteButton.addEventListener(\"click\", () => {\r\n    deleteCard(card._id, cardElement);\r\n  });\r\n\r\n  if (card.owner._id === userId) {\r\n    deleteButton.style.display = \"block\";\r\n  } else {\r\n    deleteButton.style.display = \"none\";\r\n  }\r\n\r\n  if (card.likes.some((like) => like._id === userId)) {\r\n    likeBtn.classList.add(\"card__like-button_is-active\");\r\n  }\r\n\r\n  likeBtn.addEventListener(\"click\", () => {\r\n    toggleLike(card._id, likeBtn, likeCounter);\r\n  });\r\n\r\n  likeCounter.textContent = card.likes.length;\r\n\r\n  return cardElement;\r\n}\r\n\r\n// Функция постановки и снятия лайка на карточке\r\nfunction toggleLike(cardId, likeBtn, likeCounter) {\r\n  const isLiked = likeBtn.classList.contains(\"card__like-button_is-active\");\r\n  apiToggleLike(cardId, isLiked)\r\n    .then((data) => {\r\n      likeBtn.classList.toggle(\"card__like-button_is-active\");\r\n      likeCounter.textContent = data.likes.length;\r\n    })\r\n    .catch((error) => {\r\n      console.error(\r\n        `Ошибка ${isLiked ? \"убирания лайка\" : \"постановки лайка\"} карточке:`,\r\n        error\r\n      );\r\n    });\r\n}\r\n\r\n// Функция удаления карточки\r\nfunction deleteCard(cardId, cardElement) {\r\n  apiDeleteCard(cardId)\r\n    .then(() => {\r\n      cardElement.remove();\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Ошибка:\", error);\r\n    });\r\n}\r\n\r\nexport { cardTemplate };\r\n","export { openPopup, closePopup, popups };\r\n\r\n// Закрытие окна по esc\r\nfunction closeByEsc(evt) {\r\n  if (evt.key === \"Escape\") {\r\n    const openedPopup = document.querySelector(\".popup.popup_is-opened\");\r\n    if (openedPopup) {\r\n      closePopup(openedPopup);\r\n    }\r\n  }\r\n}\r\n\r\n// Открытие popup\r\nfunction openPopup(popup) {\r\n  popup.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", closeByEsc);\r\n}\r\n\r\n// Закрытие popup\r\nfunction closePopup(popup) {\r\n  popup.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", closeByEsc);\r\n}\r\n\r\nconst popups = document.querySelectorAll(\".popup\");\r\n\r\npopups.forEach((popup) => {\r\n  popup.addEventListener(\"mousedown\", (evt) => {\r\n    if (\r\n      evt.target.classList.contains(\"popup_is-opened\") ||\r\n      evt.target.classList.contains(\"popup__close\")\r\n    ) {\r\n      closePopup(popup);\r\n    }\r\n  });\r\n});\r\n","function showInputError(\r\n  formElement,\r\n  inputElement,\r\n  errorMessage,\r\n  validationConfig\r\n) {\r\n  const { inputErrorClass, errorClass } = validationConfig;\r\n  const errorElement = inputElement.nextElementSibling;\r\n  if (errorElement) {\r\n    inputElement.classList.add(inputErrorClass);\r\n    errorElement.textContent = errorMessage;\r\n    errorElement.classList.add(errorClass);\r\n    errorElement.classList.add(\"form__input-error_active\");\r\n  }\r\n}\r\n\r\nfunction hideInputError(formElement, inputElement, validationConfig) {\r\n  const { inputErrorClass, errorClass } = validationConfig;\r\n  const errorElement = inputElement.nextElementSibling;\r\n  if (errorElement) {\r\n    inputElement.classList.remove(inputErrorClass);\r\n    if (errorElement.classList) {\r\n      errorElement.classList.remove(errorClass);\r\n      errorElement.classList.remove(\"form__input-error_active\");\r\n    }\r\n    errorElement.textContent = \"\";\r\n  }\r\n}\r\n\r\nfunction checkInputValidity(\r\n  formElement,\r\n  formInput,\r\n  { inputErrorClass, errorClass }\r\n) {\r\n  if (!formInput.validity.valid) {\r\n    if (formInput.validity.patternMismatch) {\r\n      formInput.setCustomValidity(formInput.dataset.errorMessage);\r\n    } else {\r\n      formInput.setCustomValidity(\"\");\r\n    }\r\n    showInputError(formElement, formInput, formInput.validationMessage, {\r\n      inputErrorClass,\r\n      errorClass,\r\n    });\r\n  } else {\r\n    formInput.setCustomValidity(\"\");\r\n    hideInputError(formElement, formInput, { inputErrorClass, errorClass });\r\n  }\r\n}\r\n\r\nfunction hasInvalidInput(inputList) {\r\n  return inputList.some((formInput) => !formInput.validity.valid);\r\n}\r\n\r\nfunction toggleButtonState(inputList, buttonElement, { inactiveButtonClass }) {\r\n  const isInvalidUrl = inputList.some((input) => !input.validity.valid);\r\n  if (isInvalidUrl) {\r\n    buttonElement.classList.add(inactiveButtonClass);\r\n    buttonElement.disabled = true;\r\n  } else {\r\n    buttonElement.classList.remove(inactiveButtonClass);\r\n    buttonElement.disabled = false;\r\n  }\r\n}\r\n\r\nfunction setEventListeners(\r\n  formElement,\r\n  { inputSelector, submitButtonSelector, ...rest }\r\n) {\r\n  const inputList = Array.from(formElement.querySelectorAll(inputSelector));\r\n  const buttonElement = formElement.querySelector(submitButtonSelector);\r\n\r\n  inputList.forEach((formInput) => {\r\n    formInput.addEventListener(\"input\", function () {\r\n      checkInputValidity(formElement, formInput, rest);\r\n      toggleButtonState(inputList, buttonElement, rest);\r\n    });\r\n  });\r\n\r\n  toggleButtonState(inputList, buttonElement, rest);\r\n}\r\n\r\nfunction enableValidation(validationConfig) {\r\n  const forms = document.querySelectorAll(validationConfig.formSelector);\r\n  forms.forEach((formElement) => {\r\n    formElement.addEventListener(\"submit\", function (evt) {\r\n      evt.preventDefault();\r\n    });\r\n\r\n    setEventListeners(formElement, validationConfig);\r\n  });\r\n}\r\n\r\nfunction clearValidation(\r\n  formElement,\r\n  { inputErrorClass, errorClass, inactiveButtonClass }\r\n) {\r\n  const inputList = Array.from(formElement.querySelectorAll(\".popup__input\"));\r\n  const buttonElement = formElement.querySelector(\".popup__button\");\r\n\r\n  inputList.forEach((formInput) => {\r\n    hideInputError(formElement, formInput, { inputErrorClass, errorClass });\r\n  });\r\n\r\n  buttonElement.classList.add(inactiveButtonClass);\r\n  buttonElement.disabled = true;\r\n}\r\n\r\nexport { enableValidation, clearValidation };\r\n","import \"./pages/index.css\";\r\nimport { createCard, cardTemplate } from \"./components/card.js\";\r\nimport { closePopup, openPopup } from \"./components/modal.js\";\r\nimport { getUserInfo, getInitialCards, updateUserProfile as apiUpdateUserProfile,addCard, changeAvatar as apiChangeAvatar } from \"./components/api.js\";\r\nimport { enableValidation, clearValidation } from \"./components/validation\";\r\n\r\n// @todo: DOM узлы\r\nconst cardsContainer = document.querySelector(\".places__list\");\r\n\r\n// Обработка данных пользователя и карточек при их загрузке\r\nPromise.all([getUserInfo(), getInitialCards()])\r\n  .then(([userData, cardsData]) => {\r\n    nameElement.textContent = userData.name;\r\n    jobElement.textContent = userData.about;\r\n\r\n    const userId = userData._id;\r\n\r\n    const profileImage = document.querySelector(\".profile__image\");\r\n    profileImage.style.backgroundImage = `url('${userData.avatar}')`;\r\n\r\n    cardsData.forEach((card) => {\r\n      const createdCard = createCard(card, openImageHandler, userId);\r\n      cardsContainer.appendChild(createdCard);\r\n    });\r\n\r\n    nameInput.value = userData.name;\r\n    jobInput.value = userData.about;\r\n  })\r\n  .catch((error) => {\r\n    console.error(\"Ошибка:\", error);\r\n  });\r\n\r\n// Открытие и закрытие модального окна\r\nconst buttonOpenPopupProfile = document.querySelector(\".profile__edit-button\");\r\nconst buttonOpenPopupNewCard = document.querySelector(\".profile__add-button\");\r\nconst popupEdit = document.querySelector(\".popup_type_edit\");\r\nconst popupNewCard = document.querySelector(\".popup_type_new-card\");\r\n\r\nbuttonOpenPopupProfile.addEventListener(\"click\", () => openPopup(popupEdit));\r\nbuttonOpenPopupNewCard.addEventListener(\"click\", () => openPopup(popupNewCard));\r\n\r\n// Изменение имени\r\nconst formElement = document.querySelector(\".popup__form\");\r\nconst nameInput = document.querySelector(\".popup__input_type_name\");\r\nconst jobInput = document.querySelector(\".popup__input_type_description\");\r\nconst nameElement = document.querySelector(\".profile__title\");\r\nconst jobElement = document.querySelector(\".profile__description\");\r\n\r\nfunction handleEditFormSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  const newName = nameInput.value;\r\n  const newJob = jobInput.value;\r\n  const saveButton = formElement.querySelector(\".popup__button\");\r\n  saveButton.textContent = \"Сохранение...\";\r\n\r\n  apiUpdateUserProfile(newName, newJob)\r\n    .then((updatedUserData) => {\r\n      nameElement.textContent = updatedUserData.name;\r\n      jobElement.textContent = updatedUserData.about;\r\n      const popup = formElement.closest(\".popup\");\r\n      if (popup) {\r\n        closePopup(popup);\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Ошибка\", error);\r\n    })\r\n    .finally(() => {\r\n      saveButton.textContent = \"Сохранить\";\r\n    });\r\n}\r\n\r\nformElement.addEventListener(\"submit\", handleEditFormSubmit);\r\n\r\n// Открытие иллюстрации\r\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\r\nconst popupImageContent = popupTypeImage.querySelector(\".popup__content_content_image\");\r\nconst popupImage = popupImageContent.querySelector(\".popup__image\");\r\nconst popupCaption = document.querySelector(\".popup__caption\");\r\n\r\n// Функция добавления новой карточки\r\nconst popupNewCardForm = popupNewCard.querySelector(\".popup__form\");\r\nconst newCardNameInput = popupNewCard.querySelector(\".popup__input_type_card-name\");\r\nconst newCardLinkInput = popupNewCard.querySelector(\".popup__input_type_url\");\r\n\r\nlet userId;\r\n\r\nfunction addNewCard(event, userId) {\r\n  const newCard = {\r\n    name: newCardNameInput.value,\r\n    link: newCardLinkInput.value,\r\n  };\r\n\r\n  const saveButton = popupNewCardForm.querySelector(\".popup__button\");\r\n  saveButton.textContent = \"Сохранение...\";\r\n\r\n  addCard(newCard)\r\n    .then((newCardData) => {\r\n      const currentUserCanDelete = newCardData.owner._id === userId;\r\n      const newCardElement = createCard(\r\n        newCardData,\r\n        openImageHandler,\r\n        userId,\r\n        currentUserCanDelete\r\n      );\r\n      cardsContainer.insertBefore(newCardElement, cardsContainer.firstChild);\r\n      event.target.reset();\r\n      saveButton.classList.add(\"popup__button-inactive\");\r\n      saveButton.disabled = true;\r\n      const popup = popupNewCardForm.closest(\".popup\");\r\n      if (popup) {\r\n        closePopup(popup);\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Ошибка:\", error);\r\n    })\r\n    .finally(() => {\r\n      saveButton.textContent = \"Сохранение\";\r\n    });\r\n}\r\n\r\npopupNewCardForm.addEventListener(\"submit\", addNewCard);\r\n\r\nfunction openImageHandler(src, alt, caption) {\r\n  openPopup(popupTypeImage);\r\n  popupImage.src = src;\r\n  popupImage.alt = alt;\r\n  popupCaption.textContent = caption;\r\n}\r\n\r\n// Обновление аватара\r\nconst avatarForm = document.getElementById(\"avatar-form\");\r\nconst avatarUrlInput = document.getElementById(\"avatar-url\");\r\nconst popupAvatar = document.querySelector(\".popup__avatar\");\r\nconst profileImage = document.querySelector(\".profile__image\");\r\n\r\nfunction changeAvatar(avatarUrl) {\r\n  const saveButton = avatarForm.querySelector(\".popup__button\");\r\n  saveButton.textContent = \"Сохранение...\";\r\n\r\n  apiChangeAvatar(avatarUrl)\r\n    .then((data) => {\r\n      profileImage.style.backgroundImage = `url(${avatarUrl})`;\r\n      const popup = avatarForm.closest(\".popup\");\r\n      if (popup) {\r\n        closePopup(popup);\r\n      }\r\n      avatarUrlInput.value = \"\";\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Ошибка:\", error);\r\n    })\r\n    .finally(() => {\r\n      saveButton.textContent = \"Сохранить\";\r\n    });\r\n}\r\n\r\nfunction openAvatarModal() {\r\n  openPopup(popupAvatar);\r\n}\r\n\r\nfunction handleAvatarFormSubmit(event) {\r\n  event.preventDefault();\r\n  const newAvatarUrl = avatarUrlInput.value;\r\n  const saveButton = avatarForm.querySelector(\".popup__button\");\r\n  saveButton.textContent = \"Сохранение...\";\r\n  changeAvatar(newAvatarUrl);\r\n}\r\n\r\nprofileImage.addEventListener(\"click\", openAvatarModal);\r\navatarForm.addEventListener(\"submit\", handleAvatarFormSubmit);\r\n\r\n// Валидация\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button-inactive\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"form__input-error\",\r\n};\r\n\r\nenableValidation(validationConfig);\r\n\r\nconst profileForm = document.querySelector('.popup__form[name=\"edit-profile\"]');\r\nclearValidation(profileForm, validationConfig);\r\n\r\nconst newPlaceForm = document.querySelector('.popup__form[name=\"new-place\"]');\r\nclearValidation(newPlaceForm, validationConfig);\r\n\r\nexport {\r\n  cardTemplate,\r\n  createCard,\r\n  openImageHandler,\r\n};\r\n"],"names":["checkResponse","res","ok","json","Promise","reject","concat","status","config","baseUrl","headers","authorization","cardTemplate","document","querySelector","content","createCard","card","openImageHandler","userId","deleteCallback","cardElement","cloneNode","cardImages","cardTitle","deleteButton","likeBtn","likeCounter","alt","name","src","link","textContent","addEventListener","cardId","fetch","method","then","apiDeleteCard","remove","catch","error","console","deleteCard","_id","owner","style","display","likes","some","like","classList","add","isLiked","contains","apiToggleLike","data","toggle","length","toggleLike","closeByEsc","evt","key","openedPopup","closePopup","openPopup","popup","removeEventListener","querySelectorAll","forEach","target","hideInputError","formElement","inputElement","validationConfig","inputErrorClass","errorClass","errorElement","nextElementSibling","toggleButtonState","inputList","buttonElement","_ref2","inactiveButtonClass","input","validity","valid","disabled","setEventListeners","_ref3","inputSelector","submitButtonSelector","rest","_objectWithoutProperties","_excluded","Array","from","formInput","_ref","setCustomValidity","patternMismatch","dataset","errorMessage","showInputError","validationMessage","checkInputValidity","clearValidation","_ref4","cardsContainer","all","userData","cardsData","nameElement","jobElement","about","backgroundImage","avatar","createdCard","appendChild","nameInput","value","jobInput","buttonOpenPopupProfile","buttonOpenPopupNewCard","popupEdit","popupNewCard","preventDefault","newName","newJob","saveButton","body","JSON","stringify","updatedUserData","closest","finally","popupTypeImage","popupImage","popupCaption","popupNewCardForm","newCardNameInput","newCardLinkInput","caption","event","newCard","addCard","newCardData","newCardElement","insertBefore","firstChild","reset","avatarForm","getElementById","avatarUrlInput","popupAvatar","profileImage","avatarUrl","newAvatarUrl","apiChangeAvatar","formSelector","enableValidation"],"sourceRoot":""}