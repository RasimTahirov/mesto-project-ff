{"version":3,"file":"main.js","mappings":"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","sources":["webpack://yandex.praktikum/webpack/bootstrap","webpack://yandex.praktikum/webpack/runtime/define property getters","webpack://yandex.praktikum/webpack/runtime/hasOwnProperty shorthand","webpack://yandex.praktikum/./src/components/utils.js","webpack://yandex.praktikum/./src/components/api.js","webpack://yandex.praktikum/./src/components/card.js","webpack://yandex.praktikum/./src/components/modal.js","webpack://yandex.praktikum/./src/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","export function checkResponse(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка ${res.status}`);\r\n}\r\n","const config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-8\",\r\n  headers: {\r\n    authorization: \"f0900dc3-fecd-4246-b516-514bd8cfc01c\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\nimport { checkResponse } from \"./utils\";\r\n\r\n// Функция загрузки информации о пользователе\r\nexport const getUserInfo = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers,\r\n  }).then(checkResponse)\r\n};\r\n\r\n// Функция загрузки карточек\r\nexport const getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers,\r\n  }).then(checkResponse)\r\n};\r\n\r\n// Функция обновления данных профиля пользователя\r\nexport const updateUserProfile = (name, about) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about,\r\n    }),\r\n  }).then(checkResponse)\r\n};\r\n\r\n// Функция добавления новой карточки\r\nexport const addCard = (newCard) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify(newCard),\r\n  }).then(checkResponse)\r\n};\r\n\r\n// Функция удаления карточки\r\nexport const deleteCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then(checkResponse)\r\n};\r\n\r\n// Функция изменения статуса лайка на карточке\r\nexport const toggleLike = (cardId, isLiked) => {\r\n  const method = isLiked ? \"DELETE\" : \"PUT\";\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: method,\r\n    headers: config.headers,\r\n  }).then(checkResponse)\r\n};\r\n\r\n// Функция обновления аватара пользователя\r\nexport const changeAvatar = (avatarUrl) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ avatar: avatarUrl }),\r\n  }).then(checkResponse);\r\n};\r\n","import { cardTemplate } from \"../index.js\";\r\nexport { createCard };\r\nimport { deleteCard as apiDeleteCard, toggleLike as apiToggleLike } from \"./api.js\";\r\n\r\n// Функция создания карточки\r\nfunction createCard(card, openImageHandler, userId, deleteCallback) {\r\n  const cardElement = cardTemplate.querySelector(\".card\").cloneNode(true);\r\n  const cardImages = cardElement.querySelector(\".card__image\");\r\n  const cardTitle = cardElement.querySelector(\".card__title\");\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  const likeBtn = cardElement.querySelector(\".card__like-button\");\r\n  const likeCounter = cardElement.querySelector(\".card__like-counter\");\r\n\r\n  cardImages.alt = card.name;\r\n  cardImages.src = card.link;\r\n  cardTitle.textContent = card.name;\r\n\r\n  cardImages.addEventListener(\"click\", () => {\r\n    openImageHandler(card.link, card.name, card.name);\r\n  });\r\n\r\n  deleteButton.addEventListener(\"click\", () => {\r\n    deleteCard(card._id, cardElement);\r\n  });\r\n\r\n  if (card.owner._id === userId) {\r\n    deleteButton.style.display = \"block\";\r\n  } else {\r\n    deleteButton.style.display = \"none\";\r\n  }\r\n\r\n  if (card.likes.some((like) => like._id === userId)) {\r\n    likeBtn.classList.add(\"card__like-button_is-active\");\r\n  }\r\n\r\n  likeBtn.addEventListener(\"click\", () => {\r\n    toggleLike(card._id, likeBtn, likeCounter);\r\n  });\r\n\r\n  likeCounter.textContent = card.likes.length;\r\n\r\n  return cardElement;\r\n}\r\n\r\n// Функция постановки и снятия лайка на карточке\r\nfunction toggleLike(cardId, likeBtn, likeCounter) {\r\n  const isLiked = likeBtn.classList.contains(\"card__like-button_is-active\");\r\n  apiToggleLike(cardId, isLiked)\r\n    .then((data) => {\r\n      likeBtn.classList.toggle(\"card__like-button_is-active\");\r\n      likeCounter.textContent = data.likes.length;\r\n    })\r\n    .catch((error) => {\r\n      console.error(\r\n        `Ошибка ${isLiked ? \"убирания лайка\" : \"постановки лайка\"} карточке:`,\r\n        error\r\n      );\r\n    });\r\n}\r\n\r\n// Функция удаления карточки\r\n\r\nfunction deleteCard(cardId, cardElement) {\r\n  apiDeleteCard(cardId) \r\n    .then(() => {\r\n      cardElement.remove();\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Ошибка удаления карты:\", error);\r\n    });\r\n}\r\n","export { openPopup, closePopup, closePopupOverlay };\r\nimport { nameInput, jobInput, nameElement, jobElement } from \"../index.js\";\r\n\r\n// Закрытие окна по esc\r\nfunction closeByEsc(evt) {\r\n  if (evt.key === \"Escape\") {\r\n    const openedPopup = document.querySelector(\".popup.popup_is-opened\");\r\n    if (openedPopup) {\r\n      closePopup(openedPopup);\r\n    }\r\n  }\r\n}\r\n\r\n// Открытие popup\r\nfunction openPopup(popup) {\r\n  popup.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", closeByEsc);\r\n\r\n  nameInput.value = nameElement.textContent;\r\n  jobInput.value = jobElement.textContent;\r\n}\r\n\r\n// Закрытие popup\r\nfunction closePopup(popup) {\r\n  popup.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", closeByEsc);\r\n}\r\n\r\n// Закрытие по overlay\r\nfunction closePopupOverlay(evt) {\r\n  const popupContent = evt.target.closest(\".popup__content\");\r\n  if (!popupContent) {\r\n    const popup = evt.target.closest(\".popup\");\r\n    if (popup) {\r\n      closePopup(popup);\r\n    }\r\n  }\r\n}\r\n\r\n// const closeBtn = document.querySelectorAll(\".popup__close\");\r\n\r\n// closeBtn.forEach((btn) => {\r\n//   btn.addEventListener(\"click\", () => {\r\n//     const popup = btn.closest(\".popup\");\r\n//     if (popup) {\r\n//       closePopup(popup);\r\n//     }\r\n//   });\r\n// });\r\n","import \"./pages/index.css\";\r\nimport { createCard, currentUserCanDelete } from \"./components/card.js\";\r\nimport {\r\n  openPopup,\r\n  closePopup,\r\n  closePopupOverlay,\r\n} from \"./components/modal.js\";\r\n// import { showError, hideError, isValid } from \"./components/validation.js\";\r\nimport {\r\n  getUserInfo,\r\n  getInitialCards,\r\n  updateUserProfile as apiUpdateUserProfile,\r\n  addCard,\r\n  changeAvatar as apiChangeAvatar,\r\n} from \"./components/api.js\";\r\n\r\n// @todo: Темплейт карточки\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\n// @todo: DOM узлы\r\nconst cardsContainer = document.querySelector(\".places__list\");\r\n\r\n// Загрузка информации о пользователе и карточек  с сервера\r\n// function loadUserInfo() {\r\n//   return fetch(\"https://nomoreparties.co/v1/wff-cohort-8/users/me\", {\r\n//     headers: {\r\n//       authorization: \"f0900dc3-fecd-4246-b516-514bd8cfc01c\",\r\n//     },\r\n//   }).then((response) => {\r\n//     if (!response.ok) {\r\n//       throw new Error(\r\n//         `Ошибка загрузки информации о пользователе: ${response.status}`\r\n//       );\r\n//     }\r\n//     return response.json();\r\n//   });\r\n// }\r\n\r\n// function loadCards() {\r\n//   return fetch(\"https://nomoreparties.co/v1/wff-cohort-8/cards\", {\r\n//     headers: {\r\n//       authorization: \"f0900dc3-fecd-4246-b516-514bd8cfc01c\",\r\n//     },\r\n//   }).then((response) => {\r\n//     if (!response.ok) {\r\n//       throw new Error(`Ошибка загрузки карточек: ${response.status}`);\r\n//     }\r\n//     return response.json();\r\n//   });\r\n// }\r\n\r\n// Обработка данных пользователя и карточек при их загрузке\r\nPromise.all([getUserInfo(), getInitialCards()])\r\n  .then(([userData, cardsData]) => {\r\n    nameElement.textContent = userData.name;\r\n    jobElement.textContent = userData.about;\r\n\r\n    const userId = userData._id;\r\n\r\n    const profileImage = document.querySelector(\".profile__image\");\r\n    profileImage.style.backgroundImage = `url('${userData.avatar}')`;\r\n\r\n    cardsData.forEach((card) => {\r\n      const createdCard = createCard(card, openImageHandler, userId);\r\n      cardsContainer.appendChild(createdCard);\r\n    });\r\n  })\r\n  .catch((error) => {\r\n    console.error(\"Произошла ошибка:\", error);\r\n  });\r\n\r\n// Открытие и закрытие модального окна\r\nconst buttonOpenPopupProfile = document.querySelector(\".profile__edit-button\");\r\nconst buttonOpenPopupNewCard = document.querySelector(\".profile__add-button\");\r\nconst popupEdit = document.querySelector(\".popup_type_edit\");\r\nconst popupNewCard = document.querySelector(\".popup_type_new-card\");\r\n\r\nbuttonOpenPopupProfile.addEventListener(\"click\", () => openPopup(popupEdit));\r\nbuttonOpenPopupNewCard.addEventListener(\"click\", () => openPopup(popupNewCard));\r\n\r\npopupEdit.addEventListener(\"click\", (evt) => closePopupOverlay(evt, popupEdit));\r\npopupNewCard.addEventListener(\"click\", (evt) =>\r\n  closePopupOverlay(evt, popupNewCard)\r\n);\r\n\r\nconst hidePopupImg = document.querySelector(\".popup_type_image \");\r\nhidePopupImg.addEventListener(\"click\", (evt) =>\r\n  closePopupOverlay(evt, hidePopupImg)\r\n);\r\n\r\n// Изменение имени\r\nconst formElement = document.querySelector(\".popup__form\");\r\nconst nameInput = document.querySelector(\".popup__input_type_name\");\r\nconst jobInput = document.querySelector(\".popup__input_type_description\");\r\nconst nameElement = document.querySelector(\".profile__title\");\r\nconst jobElement = document.querySelector(\".profile__description\");\r\n\r\n// Редактирование профиля\r\nfunction updateUserProfile(name, about) {\r\n  apiUpdateUserProfile(name, about)\r\n    .then((response) => {\r\n      if (!response.ok) {\r\n        throw new Error(\r\n          `Ошибка при обновлении данных профиля: ${response.status}`\r\n        );\r\n      }\r\n      return response.json();\r\n    })\r\n    .catch((error) => {\r\n      console.error(\r\n        \"Произошла ошибка при обновлении данных профиля:\",\r\n        error.message\r\n      );\r\n    });\r\n}\r\n\r\n// Обработчик отправки формы редактирования\r\nfunction handleEditFormSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  const newName = nameInput.value;\r\n  const newJob = jobInput.value;\r\n\r\n  const saveButton = formElement.querySelector(\".popup__button\");\r\n  saveButton.textContent = \"Сохранение...\";\r\n\r\n  apiUpdateUserProfile(newName, newJob)\r\n    .then((updatedUserData) => {\r\n      nameElement.textContent = updatedUserData.name;\r\n      jobElement.textContent = updatedUserData.about;\r\n\r\n      saveButton.textContent = \"Сохранить\";\r\n\r\n      closePopup(popupEdit);\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Ошибка при обновлении данных профиля:\", error);\r\n\r\n      saveButton.textContent = \"Сохранить\";\r\n    });\r\n}\r\n\r\nformElement.addEventListener(\"submit\", handleEditFormSubmit);\r\n\r\nnameInput.value = nameElement.textContent;\r\njobInput.value = jobElement.textContent;\r\n\r\n// Открытие иллюстрации\r\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\r\nconst popupImageContent = popupTypeImage.querySelector(\r\n  \".popup__content_content_image\"\r\n);\r\nconst popupImage = popupImageContent.querySelector(\".popup__image\");\r\nconst popupCaption = document.querySelector(\".popup__caption\");\r\n\r\n// Функция добавления новой карточки\r\nconst popupNewCardForm = popupNewCard.querySelector(\".popup__form\");\r\nconst newCardNameInput = popupNewCard.querySelector(\r\n  \".popup__input_type_card-name\"\r\n);\r\nconst newCardLinkInput = popupNewCard.querySelector(\".popup__input_type_url\");\r\n\r\nlet userId;\r\n\r\n// Добавление новой карточки\r\nfunction addNewCard(event, userId) {\r\n  event.preventDefault();\r\n  const newCard = {\r\n    name: newCardNameInput.value,\r\n    link: newCardLinkInput.value,\r\n  };\r\n\r\n  const saveButton = popupNewCardForm.querySelector(\".popup__button\");\r\n  saveButton.textContent = \"Сохранение...\";\r\n\r\n  addCard(newCard) // Используем функцию из модуля api.js\r\n    .then((newCardData) => {\r\n      const currentUserCanDelete = newCardData.owner._id === userId;\r\n      const newCardElement = createCard(\r\n        newCardData,\r\n        openImageHandler,\r\n        userId,\r\n        currentUserCanDelete\r\n      );\r\n      cardsContainer.insertBefore(newCardElement, cardsContainer.firstChild);\r\n      closePopup(popupNewCard);\r\n      event.target.reset();\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Ошибка при добавлении новой карточки:\", error);\r\n    });\r\n}\r\n\r\npopupNewCardForm.addEventListener(\"submit\", addNewCard);\r\n\r\nfunction openImageHandler(src, alt, caption) {\r\n  openPopup(popupTypeImage);\r\n  popupImage.src = src;\r\n  popupImage.alt = alt;\r\n  popupCaption.textContent = caption;\r\n}\r\n\r\n// Валидация формы\r\nconst formInput = document.querySelectorAll(\".popup__input\");\r\nconst formError = formElement.querySelector(`.${formInput.id}-error`);\r\nconst submitButton = document.querySelectorAll(\".popup__button\");\r\n\r\nconst showError = (input, errorMessage) => {\r\n  const errorElement = input.nextElementSibling;\r\n  errorElement.classList.add(\"form__input-error_active\");\r\n  errorElement.textContent = errorMessage;\r\n  submitButton.forEach((button) => {\r\n    button.setAttribute(\"disabled\", \"true\");\r\n    button.classList.add(\"popup__button-inactive\");\r\n  });\r\n};\r\n\r\nconst hideError = (input) => {\r\n  const errorElement = input.nextElementSibling;\r\n  errorElement.classList.remove(\"form__input-error_active\");\r\n  errorElement.textContent = \"\";\r\n  submitButton.forEach((button) => {\r\n    button.removeAttribute(\"disabled\", \"true\");\r\n    button.classList.remove(\"popup__button-inactive\");\r\n  });\r\n};\r\n\r\nconst isValid = (input) => {\r\n  if (input.validity.patternMismatch) {\r\n    input.setCustomValidity(input.dataset.errorMessage);\r\n  } else {\r\n    input.setCustomValidity(\"\");\r\n  }\r\n\r\n  if (!input.validity.valid) {\r\n    showError(input, input.validationMessage);\r\n  } else {\r\n    hideError(input);\r\n  }\r\n};\r\n\r\nformElement.addEventListener(\"submit\", function (evt) {\r\n  evt.preventDefault();\r\n  formInput.forEach((input) => isValid(input));\r\n});\r\n\r\nformInput.forEach((input) => {\r\n  input.addEventListener(\"input\", function () {\r\n    isValid(input);\r\n  });\r\n});\r\n\r\nconst avatarForm = document.getElementById(\"avatar-form\");\r\nconst avatarUrlInput = document.getElementById(\"avatar-url\");\r\nconst popupAvatar = document.querySelector(\".popup__avatar\");\r\nconst profileImage = document.querySelector(\".profile__image\");\r\n\r\n// Функция для изменения аватара пользователя\r\nfunction changeAvatar(avatarUrl) {\r\n  apiChangeAvatar(avatarUrl)\r\n  .then((response) => {\r\n    if (!response.ok) {\r\n      throw new Error(`Failed to change avatar: ${response.status}`);\r\n    }\r\n    profileImage.src = avatarUrl;\r\n  })\r\n  .catch((error) => {\r\n    console.error(\"Error changing avatar:\", error);\r\n  })\r\n  .finally(() => {\r\n  });\r\n}\r\n\r\nfunction openAvatarModal() {\r\n  openPopup(popupAvatar);\r\n}\r\n\r\nfunction handleAvatarFormSubmit(event) {\r\n  event.preventDefault();\r\n  const newAvatarUrl = avatarUrlInput.value;\r\n  const saveButton = avatarForm.querySelector(\".popup__button\");\r\n  saveButton.textContent = \"Сохранение...\";\r\n  changeAvatar(newAvatarUrl);\r\n  closePopup(popupAvatar);\r\n  saveButton.textContent = \"Сохранить\";\r\n}\r\n\r\nprofileImage.addEventListener(\"click\", openAvatarModal);\r\navatarForm.addEventListener(\"submit\", handleAvatarFormSubmit);\r\n\r\nexport {\r\n  cardTemplate,\r\n  createCard,\r\n  openImageHandler,\r\n  // formInput,\r\n  // formError,\r\n  // submitButton,\r\n  nameInput,\r\n  jobInput,\r\n  nameElement,\r\n  jobElement,\r\n};\r\n\r\nconst closeBtn = document.querySelectorAll(\".popup__close\");\r\n\r\nfunction setPopupListeners() {\r\n  closeBtn.forEach((btn) => {\r\n    btn.addEventListener(\"click\", () => {\r\n      const popup = btn.closest(\".popup\");\r\n      if (popup) {\r\n        closePopup(popup);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nsetPopupListeners();\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","checkResponse","res","ok","json","Promise","reject","concat","status","config","baseUrl","headers","authorization","createCard","card","openImageHandler","userId","deleteCallback","cardElement","cardTemplate","querySelector","cloneNode","cardImages","cardTitle","deleteButton","likeBtn","likeCounter","alt","name","src","link","textContent","addEventListener","cardId","fetch","method","then","apiDeleteCard","remove","catch","error","console","deleteCard","_id","owner","style","display","likes","some","like","classList","add","isLiked","contains","apiToggleLike","data","toggle","length","toggleLike","closeByEsc","evt","openedPopup","document","closePopup","openPopup","popup","nameInput","value","nameElement","jobInput","jobElement","removeEventListener","closePopupOverlay","target","closest","content","cardsContainer","all","_ref","_ref2","userData","cardsData","about","backgroundImage","avatar","forEach","createdCard","appendChild","buttonOpenPopupProfile","buttonOpenPopupNewCard","popupEdit","popupNewCard","formElement","preventDefault","newName","newJob","saveButton","body","JSON","stringify","updatedUserData","popupTypeImage","popupImage","popupCaption","popupNewCardForm","newCardNameInput","newCardLinkInput","caption","event","newCard","addCard","newCardData","newCardElement","insertBefore","firstChild","reset","formInput","querySelectorAll","submitButton","id","isValid","input","validity","patternMismatch","setCustomValidity","dataset","errorMessage","valid","errorElement","nextElementSibling","button","removeAttribute","hideError","setAttribute","showError","validationMessage","avatarForm","getElementById","avatarUrlInput","popupAvatar","profileImage","avatarUrl","newAvatarUrl","apiChangeAvatar","response","Error","finally","btn"],"sourceRoot":""}