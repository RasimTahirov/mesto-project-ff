{"version":3,"file":"main.js","mappings":"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","sources":["webpack://yandex.praktikum/webpack/bootstrap","webpack://yandex.praktikum/webpack/runtime/define property getters","webpack://yandex.praktikum/webpack/runtime/hasOwnProperty shorthand","webpack://yandex.praktikum/./src/components/card.js","webpack://yandex.praktikum/./src/components/modal.js","webpack://yandex.praktikum/./src/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import { cardTemplate } from \"../index.js\";\r\nexport { createCard };\r\n\r\n// @todo: Функция создания карточки\r\n\r\n// Функция создания карточки\r\nfunction createCard(card, openImageHandler, userId, deleteCallback) {\r\n  const cardElement = cardTemplate.querySelector(\".card\").cloneNode(true);\r\n  const cardImages = cardElement.querySelector(\".card__image\");\r\n  const cardTitle = cardElement.querySelector(\".card__title\");\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  const likeBtn = cardElement.querySelector(\".card__like-button\");\r\n  const likeCounter = cardElement.querySelector(\".card__like-counter\");\r\n\r\n  cardImages.alt = card.name;\r\n  cardImages.src = card.link;\r\n  cardTitle.textContent = card.name;\r\n\r\n  cardImages.addEventListener(\"click\", () => {\r\n    openImageHandler(card.link, card.name, card.name);\r\n  });\r\n\r\n  deleteButton.addEventListener(\"click\", () => {\r\n    deleteCard(card._id, cardElement);\r\n  });\r\n\r\n  if (card.owner._id === userId) {\r\n    deleteButton.style.display = \"block\";\r\n  } else {\r\n    deleteButton.style.display = \"none\";\r\n  }\r\n\r\n  if (card.likes.some((like) => like._id === userId)) {\r\n    likeBtn.classList.add(\"card__like-button_is-active\");\r\n  }\r\n\r\n  likeBtn.addEventListener(\"click\", () => {\r\n    toggleLike(card._id, likeBtn, likeCounter);\r\n  });\r\n\r\n  likeCounter.textContent = card.likes.length;\r\n\r\n  return cardElement;\r\n}\r\n\r\n// Функция постановки и снятия лайка на карточке\r\nfunction toggleLike(cardId, likeBtn, likeCounter) {\r\n  const isLiked = likeBtn.classList.contains(\"card__like-button_is-active\");\r\n  const method = isLiked ? \"DELETE\" : \"PUT\";\r\n\r\n  fetch(`https://nomoreparties.co/v1/wff-cohort-8/cards/likes/${cardId}`, {\r\n    method: method,\r\n    headers: {\r\n      authorization: \"f0900dc3-fecd-4246-b516-514bd8cfc01c\",\r\n    },\r\n  })\r\n    .then((response) => {\r\n      if (!response.ok) {\r\n        throw new Error(\r\n          `Failed to ${isLiked ? \"unlike\" : \"like\"} the card: ${\r\n            response.status\r\n          }`\r\n        );\r\n      }\r\n      return response.json();\r\n    })\r\n    .then((data) => {\r\n      likeBtn.classList.toggle(\"card__like-button_is-active\");\r\n      likeCounter.textContent = data.likes.length;\r\n    })\r\n    .catch((error) => {\r\n      console.error(\r\n        `Error ${isLiked ? \"unliking\" : \"liking\"} the card:`,\r\n        error\r\n      );\r\n    });\r\n}\r\n\r\n// Функция удаления карточки\r\nfunction deleteCard(cardId, cardElement) {\r\n  fetch(`https://nomoreparties.co/v1/wff-cohort-8/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      authorization: \"f0900dc3-fecd-4246-b516-514bd8cfc01c\",\r\n    },\r\n  })\r\n    .then((response) => {\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to delete card: ${response.status}`);\r\n      }\r\n      cardElement.remove();\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error deleting card:\", error);\r\n    });\r\n}\r\n","export { openPopup, closePopup, closePopupOverlay };\r\nimport { nameInput, jobInput, nameElement, jobElement } from \"../index.js\";\r\n\r\n// Закрытие окна по esc\r\nfunction closeByEsc(evt) {\r\n  if (evt.key === \"Escape\") {\r\n    const openedPopup = document.querySelector(\".popup.popup_is-opened\");\r\n    if (openedPopup) {\r\n      closePopup(openedPopup);\r\n    }\r\n  }\r\n}\r\n\r\n// Открытие popup\r\nfunction openPopup(popup) {\r\n  popup.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", closeByEsc);\r\n\r\n  nameInput.value = nameElement.textContent;\r\n  jobInput.value = jobElement.textContent;\r\n}\r\n\r\n// Закрытие popup\r\nfunction closePopup(popup) {\r\n  popup.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", closeByEsc);\r\n}\r\n\r\n// Закрытие по overlay\r\nfunction closePopupOverlay(evt) {\r\n  const popupContent = evt.target.closest(\".popup__content\");\r\n  if (!popupContent) {\r\n    const popup = evt.target.closest(\".popup\");\r\n    if (popup) {\r\n      closePopup(popup);\r\n    }\r\n  }\r\n}\r\n\r\nconst closeBtn = document.querySelectorAll(\".popup__close\");\r\n\r\ncloseBtn.forEach((btn) => {\r\n  btn.addEventListener(\"click\", () => {\r\n    const popup = btn.closest(\".popup\");\r\n    if (popup) {\r\n      closePopup(popup);\r\n    }\r\n  });\r\n});\r\n","import \"./pages/index.css\";\r\nimport { createCard, currentUserCanDelete } from \"./components/card.js\";\r\nimport {\r\n  openPopup,\r\n  closePopup,\r\n  closePopupOverlay,\r\n} from \"./components/modal.js\";\r\nexport { cardTemplate, createCard, openImageHandler };\r\n\r\n// @todo: Темплейт карточки\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\n// @todo: DOM узлы\r\nconst cardsContainer = document.querySelector(\".places__list\");\r\n\r\n// Загрузка информации о пользователе и карточек  с сервера\r\nfunction loadUserInfo() {\r\n  return fetch(\"https://nomoreparties.co/v1/wff-cohort-8/users/me\", {\r\n    headers: {\r\n      authorization: \"f0900dc3-fecd-4246-b516-514bd8cfc01c\",\r\n    },\r\n  }).then((response) => {\r\n    if (!response.ok) {\r\n      throw new Error(\r\n        `Ошибка загрузки информации о пользователе: ${response.status}`\r\n      );\r\n    }\r\n    return response.json();\r\n  });\r\n}\r\n\r\nfunction loadCards() {\r\n  return fetch(\"https://nomoreparties.co/v1/wff-cohort-8/cards\", {\r\n    headers: {\r\n      authorization: \"f0900dc3-fecd-4246-b516-514bd8cfc01c\",\r\n    },\r\n  }).then((response) => {\r\n    if (!response.ok) {\r\n      throw new Error(`Ошибка загрузки карточек: ${response.status}`);\r\n    }\r\n    return response.json();\r\n  });\r\n}\r\n\r\n// Обработка данных пользователя и карточек при их загрузке\r\nPromise.all([loadUserInfo(), loadCards()])\r\n  .then(([userData, cardsData]) => {\r\n    nameElement.textContent = userData.name;\r\n    jobElement.textContent = userData.about;\r\n\r\n    const userId = userData._id;\r\n\r\n    const profileImage = document.querySelector(\".profile__image\");\r\n    profileImage.style.backgroundImage = `url('${userData.avatar}')`;\r\n\r\n    cardsData.forEach((card) => {\r\n      const createdCard = createCard(card, openImageHandler, userId);\r\n      cardsContainer.appendChild(createdCard);\r\n    });\r\n  })\r\n  .catch((error) => {\r\n    console.error(\"Произошла ошибка:\", error);\r\n  });\r\n\r\n// Открытие и закрытие модального окна\r\nconst buttonOpenPopupProfile = document.querySelector(\".profile__edit-button\");\r\nconst buttonOpenPopupNewCard = document.querySelector(\".profile__add-button\");\r\nconst popupEdit = document.querySelector(\".popup_type_edit\");\r\nconst popupNewCard = document.querySelector(\".popup_type_new-card\");\r\n\r\nbuttonOpenPopupProfile.addEventListener(\"click\", () => openPopup(popupEdit));\r\nbuttonOpenPopupNewCard.addEventListener(\"click\", () => openPopup(popupNewCard));\r\n\r\npopupEdit.addEventListener(\"click\", (evt) => closePopupOverlay(evt, popupEdit));\r\npopupNewCard.addEventListener(\"click\", (evt) =>\r\n  closePopupOverlay(evt, popupNewCard)\r\n);\r\n\r\nconst hidePopupImg = document.querySelector(\".popup_type_image \");\r\nhidePopupImg.addEventListener(\"click\", (evt) =>\r\n  closePopupOverlay(evt, hidePopupImg)\r\n);\r\n\r\n// Изменение имени\r\nconst formElement = document.querySelector(\".popup__form\");\r\nconst nameInput = document.querySelector(\".popup__input_type_name\");\r\nconst jobInput = document.querySelector(\".popup__input_type_description\");\r\nconst nameElement = document.querySelector(\".profile__title\");\r\nconst jobElement = document.querySelector(\".profile__description\");\r\n\r\n// Редактирование профиля\r\nfunction updateUserProfile(name, about) {\r\n  return fetch(\"https://nomoreparties.co/v1/wff-cohort-8/users/me\", {\r\n    method: \"PATCH\",\r\n    headers: {\r\n      authorization: \"f0900dc3-fecd-4246-b516-514bd8cfc01c\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about,\r\n    }),\r\n  })\r\n    .then((response) => {\r\n      if (!response.ok) {\r\n        throw new Error(\r\n          `Ошибка при обновлении данных профиля: ${response.status}`\r\n        );\r\n      }\r\n      return response.json();\r\n    })\r\n    .catch((error) => {\r\n      console.error(\r\n        \"Произошла ошибка при обновлении данных профиля:\",\r\n        error.message\r\n      );\r\n    });\r\n}\r\n\r\n// Обработчик отправки формы редактирования\r\nfunction handleEditFormSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  const newName = nameInput.value;\r\n  const newJob = jobInput.value;\r\n\r\n  const saveButton = formElement.querySelector(\".popup__button\");\r\n  saveButton.textContent = \"Сохранение...\";\r\n\r\n  updateUserProfile(newName, newJob)\r\n    .then((updatedUserData) => {\r\n      nameElement.textContent = updatedUserData.name;\r\n      jobElement.textContent = updatedUserData.about;\r\n\r\n      saveButton.textContent = \"Сохранить\";\r\n\r\n      closePopup(popupEdit);\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Ошибка при обновлении данных профиля:\", error);\r\n\r\n      saveButton.textContent = \"Сохранить\";\r\n    });\r\n}\r\n\r\nformElement.addEventListener(\"submit\", handleEditFormSubmit);\r\n\r\nnameInput.value = nameElement.textContent;\r\njobInput.value = jobElement.textContent;\r\n\r\nexport { nameInput, jobInput, nameElement, jobElement };\r\n// Открытие иллюстрации\r\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\r\nconst popupImageContent = popupTypeImage.querySelector(\r\n  \".popup__content_content_image\"\r\n);\r\nconst popupImage = popupImageContent.querySelector(\".popup__image\");\r\nconst popupCaption = document.querySelector(\".popup__caption\");\r\n\r\n// Функция добавления новой карточки\r\nconst popupNewCardForm = popupNewCard.querySelector(\".popup__form\");\r\nconst newCardNameInput = popupNewCard.querySelector(\r\n  \".popup__input_type_card-name\"\r\n);\r\nconst newCardLinkInput = popupNewCard.querySelector(\".popup__input_type_url\");\r\n\r\nlet userId;\r\n\r\n// Добавление новой карточки\r\nfunction addNewCard(event, userId) {\r\n  event.preventDefault();\r\n  const newCard = {\r\n    name: newCardNameInput.value,\r\n    link: newCardLinkInput.value,\r\n  };\r\n\r\n  const saveButton = popupNewCardForm.querySelector(\".popup__button\");\r\n  saveButton.textContent = \"Сохранение...\";\r\n\r\n  fetch(\"https://nomoreparties.co/v1/wff-cohort-8/cards\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      authorization: \"f0900dc3-fecd-4246-b516-514bd8cfc01c\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(newCard),\r\n  })\r\n    .then((response) => {\r\n      if (!response.ok) {\r\n        throw new Error(\r\n          `Ошибка при добавлении новой карточки: ${response.status}`\r\n        );\r\n      }\r\n      return response.json();\r\n    })\r\n    .then((newCardData) => {\r\n      const currentUserCanDelete = newCardData.owner._id === userId;\r\n      const newCardElement = createCard(\r\n        newCardData,\r\n        openImageHandler,\r\n        userId,\r\n        currentUserCanDelete\r\n      );\r\n      cardsContainer.insertBefore(newCardElement, cardsContainer.firstChild);\r\n      closePopup(popupNewCard);\r\n      event.target.reset();\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Ошибка при добавлении новой карточки:\", error);\r\n    });\r\n}\r\n\r\npopupNewCardForm.addEventListener(\"submit\", addNewCard);\r\n\r\nfunction openImageHandler(src, alt, caption) {\r\n  openPopup(popupTypeImage);\r\n  popupImage.src = src;\r\n  popupImage.alt = alt;\r\n  popupCaption.textContent = caption;\r\n}\r\n\r\n// Валидация формы\r\nconst formInput = document.querySelectorAll(\".popup__input\");\r\nconst formError = formElement.querySelector(`.${formInput.id}-error`);\r\nconst submitButton = document.querySelectorAll(\".popup__button\");\r\n\r\nconst showError = (input, errorMessage) => {\r\n  const errorElement = input.nextElementSibling;\r\n  errorElement.classList.add(\"form__input-error_active\");\r\n  errorElement.textContent = errorMessage;\r\n  submitButton.forEach((button) => {\r\n    button.setAttribute(\"disabled\", \"true\");\r\n    button.classList.add(\"popup__button-inactive\");\r\n  });\r\n};\r\n\r\nconst hideError = (input) => {\r\n  const errorElement = input.nextElementSibling;\r\n  errorElement.classList.remove(\"form__input-error_active\");\r\n  errorElement.textContent = \"\";\r\n  submitButton.forEach((button) => {\r\n    button.removeAttribute(\"disabled\", \"true\");\r\n    button.classList.remove(\"popup__button-inactive\");\r\n  });\r\n};\r\n\r\nconst isValid = (input) => {\r\n  if (input.validity.patternMismatch) {\r\n    input.setCustomValidity(input.dataset.errorMessage);\r\n  } else {\r\n    input.setCustomValidity(\"\");\r\n  }\r\n\r\n  if (!input.validity.valid) {\r\n    showError(input, input.validationMessage);\r\n  } else {\r\n    hideError(input);\r\n  }\r\n};\r\n\r\nformElement.addEventListener(\"submit\", function (evt) {\r\n  evt.preventDefault();\r\n  formInput.forEach((input) => isValid(input));\r\n});\r\n\r\nformInput.forEach((input) => {\r\n  input.addEventListener(\"input\", function () {\r\n    isValid(input);\r\n  });\r\n});\r\n\r\nconst avatarForm = document.getElementById(\"avatar-form\");\r\nconst avatarUrlInput = document.getElementById(\"avatar-url\");\r\nconst popupAvatar = document.querySelector(\".popup__avatar\");\r\nconst profileImage = document.querySelector(\".profile__image\");\r\n\r\n// Обновление аватара пользователя\r\nfunction changeAvatar(avatarUrl) {\r\n  fetch(\"https://nomoreparties.co/v1/wff-cohort-8/users/me/avatar\", {\r\n    method: \"PATCH\",\r\n    headers: {\r\n      authorization: \"f0900dc3-fecd-4246-b516-514bd8cfc01c\",\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ avatar: avatarUrl }),\r\n  })\r\n    .then((response) => {\r\n      if (!response.ok) {\r\n        throw new Error(`Failed to change avatar: ${response.status}`);\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error changing avatar:\", error);\r\n    });\r\n}\r\n\r\nfunction openAvatarModal() {\r\n  openPopup(popupAvatar);\r\n}\r\n\r\nfunction handleAvatarFormSubmit(event) {\r\n  event.preventDefault();\r\n  const newAvatarUrl = avatarUrlInput.value;\r\n\r\n  const saveButton = avatarForm.querySelector(\".popup__button\");\r\n  saveButton.textContent = \"Сохранение...\";\r\n\r\n  changeAvatar(newAvatarUrl);\r\n  closePopup(popupAvatar);\r\n  saveButton.textContent = \"Сохранить\";\r\n}\r\n\r\nprofileImage.addEventListener(\"click\", openAvatarModal);\r\navatarForm.addEventListener(\"submit\", handleAvatarFormSubmit);\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","createCard","card","openImageHandler","userId","deleteCallback","cardElement","cardTemplate","querySelector","cloneNode","cardImages","cardTitle","deleteButton","likeBtn","likeCounter","alt","name","src","link","textContent","addEventListener","cardId","fetch","concat","method","headers","authorization","then","response","ok","Error","status","remove","catch","error","console","deleteCard","_id","owner","style","display","likes","some","like","classList","add","isLiked","contains","json","data","toggle","length","toggleLike","closeByEsc","evt","openedPopup","document","closePopup","openPopup","popup","nameInput","value","nameElement","jobInput","jobElement","removeEventListener","closePopupOverlay","target","closest","querySelectorAll","forEach","btn","content","cardsContainer","Promise","all","_ref","_ref2","userData","cardsData","about","backgroundImage","avatar","createdCard","appendChild","buttonOpenPopupProfile","buttonOpenPopupNewCard","popupEdit","popupNewCard","formElement","preventDefault","newName","newJob","saveButton","body","JSON","stringify","message","updatedUserData","popupTypeImage","popupImage","popupCaption","popupNewCardForm","newCardNameInput","newCardLinkInput","caption","event","newCard","newCardData","newCardElement","insertBefore","firstChild","reset","formInput","submitButton","id","isValid","input","validity","patternMismatch","setCustomValidity","dataset","errorMessage","valid","errorElement","nextElementSibling","button","removeAttribute","hideError","setAttribute","showError","validationMessage","avatarForm","getElementById","avatarUrlInput","popupAvatar","avatarUrl","newAvatarUrl"],"sourceRoot":""}