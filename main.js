(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t,r){var o=a.querySelector(".card").cloneNode(!0),c=o.querySelector(".card__image"),i=o.querySelector(".card__title");return c.alt=e.name,c.src=e.link,i.textContent=e.name,c.addEventListener("click",(function(){r(c.src,c.alt,i.textContent)})),o.querySelector(".card__like-button").addEventListener("click",n),o}function n(e){var t=e.currentTarget,n=t.nextElementSibling,r=t.closest(".card"),o=parseInt(r.getAttribute("data-like-count"))||0;t.classList.toggle("card__like-button_is-active"),t.classList.contains("card__like-button_is-active")?o++:o--,r.setAttribute("data-like-count",o.toString()),n.textContent=0===o?"":o.toString()}function r(e){if("Escape"===e.key){var t=document.querySelector(".popup.popup_is-opened");t&&c(t)}}function o(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",r),m.value=v.textContent,y.value=h.textContent}function c(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",r)}function i(e){if(!e.target.closest(".popup__content")){var t=e.target.closest(".popup");t&&c(t)}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.d({},{gj:()=>a,aW:()=>h,Ou:()=>y,_M:()=>v,Kk:()=>m}),document.querySelectorAll(".popup__close").forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".popup");t&&c(t)}))}));var a=document.querySelector("#card-template").content,l=document.querySelector(".places__list");Promise.all([fetch("https://nomoreparties.co/v1/wff-cohort-8/cards",{headers:{authorization:"f0900dc3-fecd-4246-b516-514bd8cfc01c",body:{likes:[],_id:"f0900dc3-fecd-4246-b516-514bd8cfc01c"}}}),fetch("https://nomoreparties.co/v1/wff-cohort-8/users/me",{headers:{authorization:"f0900dc3-fecd-4246-b516-514bd8cfc01c"}})]).then((function(e){return Promise.all(e.map((function(e){if(!e.ok)throw new Error("Ошибка: ".concat(e.status));return e.json()})))})).then((function(e){var n,r,o=(r=2,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,i,u=[],a=!0,l=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=c.call(n)).done)&&(u.push(r.value),u.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{if(!a&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(n,r)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=o[0],i=o[1],a=document.querySelector(".places__list");c.forEach((function(e){var n=t(e,0,L);a.appendChild(n)}));var l=i.name,p=i.about,s=i.avatar,d=document.querySelector(".profile__title"),f=document.querySelector(".profile__description"),_=document.querySelector(".profile__image");d.textContent=l,f.textContent=p,_.src=s,console.log(i)})).catch((function(e){console.error("Error:",e)}));var p=document.querySelector(".profile__edit-button"),s=document.querySelector(".profile__add-button"),d=document.querySelector(".popup_type_edit"),f=document.querySelector(".popup_type_new-card");p.addEventListener("click",(function(){return o(d)})),s.addEventListener("click",(function(){return o(f)})),d.addEventListener("click",(function(e){return i(e)})),f.addEventListener("click",(function(e){return i(e)})),document.querySelector(".popup_type_image ").addEventListener("click",(function(e){return i(e)}));var _=document.querySelector(".popup__form"),m=document.querySelector(".popup__input_type_name"),y=document.querySelector(".popup__input_type_description"),v=document.querySelector(".profile__title"),h=document.querySelector(".profile__description");_.addEventListener("submit",(function(e){e.preventDefault();var t=m.value,n=y.value;fetch("https://nomoreparties.co/v1/wff-cohort-8/users/me",{method:"PATCH",headers:{authorization:"f0900dc3-fecd-4246-b516-514bd8cfc01c","Content-Type":"application/json"},body:JSON.stringify({name:t,about:n})}).then((function(e){if(!e.ok)throw new Error("Ошибка при редактирование данных профиля: ".concat(e.status));return e.json()})).then((function(e){v.textContent=e.name,h.textContent=e.about,console.log("Изменено"),c(d)})).catch((function(e){console.error("Произошла ошибка при редактирование данных профиля:",e)}))}));var b=document.querySelector(".popup_type_image"),S=b.querySelector(".popup__content_content_image").querySelector(".popup__image"),g=document.querySelector(".popup__caption"),q=f.querySelector(".popup__form"),E=f.querySelector(".popup__input_type_card-name"),k=f.querySelector(".popup__input_type_url");function L(e,t,n){o(b),S.src=e,S.alt=t,g.textContent=n}q.addEventListener("submit",(function(e){e.preventDefault(),fetch("https://nomoreparties.co/v1/wff-cohort-8/cards",{method:"POST",headers:{authorization:"f0900dc3-fecd-4246-b516-514bd8cfc01c","Content-Type":"application/json"},body:JSON.stringify({name:E.value,link:k.value,likes:[],_id:"f0900dc3-fecd-4246-b516-514bd8cfc01c"})}).then((function(e){if(!e.ok)throw new Error("Ошибка при добавлении новой карточки ".concat(e.status));return e.json()})).then((function(n){var r=t(n,0,L);l.insertBefore(r,l.firstChild),c(f),e.target.reset(),console.log("Test")})).catch((function(e){console.error("Ошибка при добавлении карточки:",e)}))}));var C=document.querySelectorAll(".popup__input"),w=(_.querySelector(".".concat(C.id,"-error")),document.querySelectorAll(".popup__button")),x=function(e){e.validity.patternMismatch?e.setCustomValidity(e.dataset.errorMessage):e.setCustomValidity(""),e.validity.valid?function(e){var t=e.nextElementSibling;t.classList.remove("form__input-error_active"),t.textContent="",w.forEach((function(e){e.removeAttribute("disabled","true"),e.classList.remove("popup__button-inactive")}))}(e):function(e,t){var n=e.nextElementSibling;n.classList.add("form__input-error_active"),n.textContent=t,w.forEach((function(e){e.setAttribute("disabled","true"),e.classList.add("popup__button-inactive")}))}(e,e.validationMessage)};_.addEventListener("submit",(function(e){e.preventDefault(),C.forEach((function(e){return x(e)}))})),C.forEach((function(e){e.addEventListener("input",(function(){x(e)}))}))})();
//# sourceMappingURL=main.js.map